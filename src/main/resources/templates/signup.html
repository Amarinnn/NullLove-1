<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description"
  content="An impressive and flawless site template that includes various UI elements and countless features, attractive ready-made blocks and rich pages, basically everything you need to create a unique and professional website.">
<meta name="keywords"
  content="bootstrap 5, business, corporate, creative, gulp, marketing, minimal, modern, multipurpose, one page, responsive, saas, sass, seo, startup, html5 template, site template">
<meta name="author" content="elemis">
<title>join</title>
<link rel="shortcut icon" href="./assets/img/favicon.png">
<link rel="stylesheet" href="./assets/css/plugins.css">
<link rel="stylesheet" href="./assets/css/style.css">
<link rel="preload" href="./assets/css/fonts/noto2.css" as="style" onload="this.rel='stylesheet'">
</head>

<body>
  <div class="content-wrapper">
    <th:block th:replace="jy/header" ::header></th:block>
    <!-- /header -->
    <section class="wrapper image-wrapper bg-image bg-overlay bg-overlay-light-600 text-white"
      data-image-src="./assets/img/photos/bg18.png">
      <div class="container pt-17 pb-20 pt-md-15 pb-md-21 text-center">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h1 class="display-1 mb-3">회원가입</h1>
            <!-- /nav -->
          </div>
          <!-- /column -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container -->
    </section>
    <!-- /section -->
    <section class="wrapper bg-light">
      <div class="container pb-14 pb-md-16">
        <div class="row">
          <div class="col-lg-10 col-xl-9 col-xxl-8 mx-auto mt-n20">
            <div class="card">
              <div class="card-body p-11 text-center">
                <form action="signup" class="text-start mb-3" method="post" name="join_form">
                  <div class="form-floating mb-4 ">
                    <input type="text" class="form-control w-75 float-start me-lg-5" placeholder="Name" id="id"
                      name="id">
                    <label for="loginName">ID *</label>
                    <a href="#" class="btn btn-soft-primary btn-sm rounded-pill" type="button" onclick="checkId()">아이디
                      중복확인</a>
                  </div>
                  <!--  <div class="form-floating">
                    <p class="ms-4 mb-2 text-start small fw-bold">아이디 중복확인을 진행해주세요.</p>
                  </div> -->
                  <div class="form-floating mb-4">
                    <input type="email" class="form-control" placeholder="Email" id="email" name="email">
                    <label for="loginEmail">Email *</label>
                  </div>
                  <div class="form-floating password-field mb-4">
                    <input type="password" class="form-control" placeholder="Password" id="pw" name="pw">
                    <span class="password-toggle">
                      <i class="uil uil-eye"></i>
                    </span>
                    <label for="loginPassword">비밀번호 *</label>
                  </div>
                  <div class="form-floating mb-4">
                    <input type="text" class="form-control" placeholder="이름" id="name" name="name">
                    <label for="loginEmail">이름 *</label>
                  </div>
                  <div class="form-floating mb-4">
                    <input type="text" class="form-control" placeholder="닉네임" id="nick" name="nick">
                    <label for="loginEmail">닉네임 *</label>
                  </div>
                  <div class="form-floating mb-2">
                    <input type="text" class="form-control" placeholder="회사명" id="company_name" name="company_name">
                    <label for="company">가입된 기업회원이 있다면 회사명을 정확히 기입해주세요.</label>
                  </div>
                  <input type="hidden" id="login_type" name="login_type" value="S">
                  <a class="btn btn-primary rounded-pill btn-login w-100 mb-2 mt-5" type="button"
                    onclick="joinform_check();">회원가입</a>
                </form>
                <!-- /form -->
              </div>
              <!--/.card-body -->
            </div>
            <!--/.card -->
          </div>
          <!-- /column -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container -->
    </section>
    <!-- /section -->
  </div>
  <!-- /.content-wrapper -->
  <th:block th:replace="jy/footer" ::footer></th:block>
  <div class="progress-wrap">
    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
      <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
    </svg>
  </div>
  <script src="./assets/js/plugins.js"></script>
  <script src="./assets/js/theme.js"></script>
  <script>
			function joinform_check() {
				//변수에 담아주기
				var id = document.getElementById("id");
				var pw = document.getElementById("pw");
				var name = document.getElementById("name");
				var nick = document.getElementById("nick");
				var email = document.getElementById("email");
				var company = document.getElementById("company_name");

				if (id.value == "") { //해당 입력값이 없을 경우 같은말: if(!uid.value)
					alert("아이디를 입력하세요.");
					id.focus(); //focus(): 커서가 깜빡이는 현상, blur(): 커서가 사라지는 현상
					return false; //return: 반환하다 return false:  아무것도 반환하지 말아라 아래 코드부터 아무것도 진행하지 말것
				}
				;	

				if (pw.value == "") {
					alert("비밀번호를 입력하세요.");
					pw.focus();
					return false;
				}
				;
				if (name.value == "") {
					alert("이름을 입력하세요.");
					name.focus();
					return false;
				}
				;
				if (nick.value == "") {
					alert("닉네임을 입력하세요.");
					nick.focus();
					return false;
				}
				;
				if (email.value == "") {
					alert("이메일을 입력하세요.");
					email.focus();
					return false;
				}
				;
				/*  if (company_name.value == "") {
				     alert("회사명을 입력하세요.");
				     company_name.focus();
				     return false;
				         }; */
				//입력 값 전송
				document.join_form.submit(); //유효성 검사의 포인트   
			}
			function idCheck(data) {
				console.log(data);

				if (data.memID == 'null') {
					$('#idResult').html("사용가능한 아이디입니다.");
					$('#idResult').css("color", "blue");
					$('.join').removeAttr('readonly');
				} else {
					$('#idResult').html("사용이 불가능한 아이디입니다.");
					$('#idResult').css("color", "red");
				}
			}
			$('#idCheck').on('click', function() {
				var memID = $('#memID').val();
				console.log(memID);
				$.ajax({
					url : "idCheck.do",
					data : {
						memID : memID
					},
					method : "POST",
					dataType : "json",
					success : idCheck,
					error : function(e) {
						console.log(e);
						console.log("통신실패");
					}

				});
			});

			function checkId() {
				var id = $('#id').val(); //id값이 "id"인 입력란의 값을 저장
				$.ajax({
					url : './idCheck', //Controller에서 요청 받을 주소
					type : 'post', //POST 방식으로 전달
					data : {
						id : id
					},
					success : function(cnt) { //컨트롤러에서 넘어온 cnt값을 받는다 
						if (cnt == 0) { //cnt가 1이 아니면(=0일 경우) -> 사용 가능한 아이디 
							$('.id_ok').css("display", "inline-block");
							$('.id_already').css("display", "none");
							alert("사용가능한 아이디입니다");
						} else { // cnt가 1일 경우 -> 이미 존재하는 아이디
							$('.id_already').css("display", "inline-block");
							$('.id_ok').css("display", "none");
							alert("이미 사용중인 아이디입니다");
							$('#id').val('');
						}
					},
					error : function() {
						alert("에러입니다");
					}
				});
			};
		</script>
  <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
</body>

</html>