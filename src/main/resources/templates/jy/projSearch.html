<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="An impressive and flawless site template that includes various UI elements and countless features, attractive ready-made blocks and rich pages, basically everything you need to create a unique and professional website.">
  <meta name="keywords"
    content="bootstrap 5, business, corporate, creative, gulp, marketing, minimal, modern, multipurpose, one page, responsive, saas, sass, seo, startup, html5 template, site template">
  <meta name="author" content="elemis">
  <title>RCMD</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="./assets/js/jquery.simplePagination.js"></script>

  <link rel="shortcut icon" href="./assets/img/favicon.png">
  <link rel="stylesheet" href="./assets/css/plugins.css">
  <link rel="stylesheet" href="./assets/css/style.css">
  <link rel="stylesheet" href="./assets/css/jy.css">
  <link rel="preload" href="./assets/css/fonts/noto2.css" as="style" onload="this.rel='stylesheet'">
  <!-- pagenation -->

</head>

<body>
  <div class="content-wrapper">
    <th:block th:replace="jy/header" ::header></th:block>
    <!-- /header -->
    <section class="wrapper image-wrapper bg-image bg-overlay bg-overlay-light-600 text-white"
      data-image-src="./assets/img/photos/bg18.png">
      <div class="container pt-17 pb-20 pt-md-15 pb-md-21 text-center">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h1 class="display-1 mb-3">우수사업계획서</h1>
            <!-- /nav -->
          </div>
          <!-- /column -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container -->
    </section>
    <!-- /section -->
    <section class="wrapper bg-light">
      <div class="container pb-14 pb-md-16">
        <div class="row">
          <div class="col-lg-12 col-xl-12 col-xxl-12 mx-auto mt-n20">
            <div class="card">
              <div class="card-body text-center">
                <div class="row row-cards ">
                  <div class="col-12 mt-2">
                    <div class="bg-light border-y">
                      <div class="table-responsive">
                        <table class="table table-sm table-hover  ">
                          <thead class="bg-soft-ash ">
                          <tr>
                            <th>번호</th>
                            <th style="width:32rem">제목</th>
                            <th>글쓴이</th>
                            <th>등록일</th>
                            <th>좋아요</th>
                            <th>조회</th>
                          </tr>
                          </thead>
                          <tbody class="fw-semibold">
                          <!--공지사항-->
                          <tr class="bg-soft-yellow text-orange" th:if="${#strings.equals(proj.notice, 'A')}" th:each="proj:${list}">
                            <td th:text="${proj.seq}" class="text-center">seq</td>
                            <td   th:if="${#lists.isEmpty(session.mvo)}" class="text-start"><a  href="javascript:altr()"  class="text-reset" th:text="${proj.title}"></a></td>
                            <td   th:if="${!#lists.isEmpty(session.mvo)}" class="text-start"><a th:href="@{/projBoardView(seq=${proj.seq})}" class="text-reset" th:text="${proj.title}"></a></td>
                            <td th:text="${proj.id}" class="">id
                            </td>
                            <td th:text="${#dates.format(proj.date, 'yy-MM-dd')}" class="">date</td>
                            <td th:text="${proj.count}" class="">count</td>
                            <td th:text="${proj.cnt}" class="">cnt</td>
                          </tr>
                          </tbody>
                          <tbody class="fw-semibold" id="tboddy">
                          <!--일반유저게시글-->
<!--                          <tr th:if="${#strings.equals(proj.notice, 'n')}" th:each="proj:${list}">-->
<!--                            <td th:text="${proj.seq}" class="text-center">seq</td>-->
<!--                            <td   th:if="${#lists.isEmpty(session.mvo)}" class="text-start"><a  href="javascript:altr()"  class="text-reset" th:text="${proj.title}"></a></td>-->
<!--                            <td   th:if="${!#lists.isEmpty(session.mvo)}" class="text-start"><a th:href="@{/projBoardView(seq=${proj.seq})}" class="text-reset" th:text="${proj.title}"></a></td>-->
<!--                            <td th:text="${proj.id}" class="">id-->
<!--                              &lt;!&ndash; <td th:text="${proj.id}" class="">id &ndash;&gt;-->
<!--                            </td>-->
<!--                            <td th:text="${#dates.format(proj.date, 'yy-MM-dd')}" class="">date</td>-->
<!--                            <td th:text="${proj.count}" class="">count</td>-->
<!--                            <td th:text="${proj.cnt}" class="">cnt</td>-->
<!--                          </tr>-->
                          </tbody>
                        </table>
                      </div>
                      <div class="row mb-4">
                        <div class="col"></div>
                        <div class="col">
                          <nav class="d-flex" aria-label="pagination">
                            <ul class="pagination mb-0" id="pagination">
<!--                              <li class="page-item disabled">-->
<!--                                <a class="page-link" href="#" aria-label="Previous">-->
<!--                                  <span aria-hidden="true"><i class="uil uil-arrow-left"></i></span>-->
<!--                                </a>-->
<!--                              </li>-->
<!--                              <li class="page-item active"><a class="page-link" href="#">1</a></li>-->
<!--                              <li class="page-item"><a class="page-link" href="#">2</a></li>-->
<!--                              <li class="page-item"><a class="page-link" href="#">3</a></li>-->
<!--                              <li class="page-item">-->
<!--                                <a class="page-link" href="#" aria-label="Next">-->
<!--                                  <span aria-hidden="true"><i class="uil uil-arrow-right"></i></span>-->
<!--                                </a>-->
<!--                              </li>-->
                            </ul>
                            <!-- /.pagination -->
                          </nav>
                        </div>
                        <div class="col">
                          <a  th:if="${!#lists.isEmpty(session.mvo)}" href="/projBoardForm" class="btn btn-sm btn-gradient gradient-7 float-end"><i
                              class="uil uil-pen"></i>&nbsp;글쓰기</a>
                          <a th:if="${#lists.isEmpty(session.mvo)}" href="javascript:altr()"  class="btn btn-sm btn-gradient gradient-7 float-end"><i
                              class="uil uil-pen"></i>&nbsp;글쓰기</a>
                        </div>

                      </div>
                      <div class="card-footer pb-0">
                        <div class="row m-auto mb-3">
                          <div class="col">
                            <form class="search-form" action="/projSearch" method="GET">
                              <div class="input-group mb-3">
                                <select class="form-select " aria-label="Default select example" name="option">

                                  <option value="1">제목</option>

                                  <option value="2">내용</option>
                                  <input type="text" class="form-control w-50" placeholder="Search"
                                         aria-label="Example text with button addon" aria-describedby="button-addon1"
                                         id="search" name="search"/>
                                </select>
                              </div>
                            </form>
                          </div>
                        </div>
                      </div>

                      <!--/.card-body -->
                    </div>
                  </div>
                    <!--/.card -->
          </div>
          <!-- /column -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container -->
      </div>
        </div>
      </div>
    </section>
    <!-- /section -->
  </div>
  <!-- /.content-wrapper -->
 <th:block th:replace="jy/footer" ::footer></th:block>
  <div class="progress-wrap">
    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
      <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
    </svg>
  </div>
  <script src="./assets/js/plugins.js"></script>
  <script src="./assets/js/theme.js"></script>
  <script src="./assets/js/purePajinate.js"></script>
</body>
<script th:inline="javascript">
	  /*<![CDATA[*/
		function altr(){
    alert("로그인 후 이용 가능합니다.");
  };

  // pagenation 세팅
    let totalCount = /*[[${total}]]*/; //글의 총수
    let countList = 10; //보여질 글의 갯수
    let totalPage = totalCount / countList; //총 페이지의 수
    let pageSize =5; //페이지네이션의 사이즈

    if (totalCount % countList > 0) {
        totalPage++;
    }



    $('#pagination').twbsPagination({
      totalPages : totalPage, //총 페이지수
      visiablePages : 5, //보이는 페이지수
      startPage:1, //시작페이지


        //" « "라는 문자열로 최신글 방향을 표시
        first:"First" ,

        //" » "라는 문자열로 마지막글 방향을 표시
        last:"Last" ,

        prev:"Prev",
        next:"Next",
        onPageClick: function (event, page) {
          paging(page);
                }
         });
      function paging(page){
        var list = /*[[${list}]]*/;
        let str="";

        let start =(page-1)*countList;
        if (page==1){start=0};

        let end = start+countList-1;
        var endd = Math.floor(totalPage) ;
        if (page==endd){end=totalCount-1};

        var arr= new Array(10);

        console.log('page : '+page);
        console.log('epage : '+endd);
        console.log('start : '+start);
        console.log('end : '+end);

        for(let i=start; i<=end; i++){
          const ll = list[i];
          var k=0;
          console.log(i);
            for(var key in ll) {
<!--              console.log(key + " : " + ll[key]);-->
              arr[k]=ll[key];
              k++;
            }
            console.log(arr);
            var dd = arr[3]
            dd = dd.slice(2,10);
            console.log(dd);
            $('#tboddy').empty();
              str+='<tr>';
                str+='<td>'+arr[0]+'</td>'; //seq
                //비로그인일때
                if(/*[[${#lists.isEmpty(session.mvo)}]]*/==null){
                  str+='<td class="text-start"><a href="javascript:altr()" class="text-reset">'+arr[1]+'</a></td>';
                }
                //로그인일때
                if(/*[[${!#lists.isEmpty(session.mvo)}]]*/==null){
                  str+='<td class="text-start"><a href="projBoardView?seq='+arr[0]+'" class="text-reset">'+arr[1]+'</a></td>';
                }
<!--                str+='<td>'+arr[1]+'</td>'; //title-->
                str+='<td>'+arr[7]+'</td>'; //id
                str+='<td>'+dd+'</td>'; //date
                str+='<td>'+arr[8]+'</td>'; //count(좋아요)
                str+='<td>'+arr[4]+'</td>'; //cnt(조회수)
<!--              str+='<td>'+arr[2]+'</td>'; //content-->
<!--              str+='<td>'+arr[5]+'</td>'; //lieks-->
<!--              str+='<td>'+arr[6]+'</td>'; //notice-->
<!--              str+='<td>'+arr[9]+'</td>'; //file-->
              str+='</tr>';
            $('#tboddy').append(str);
        };
      };
 /*]]>*/
</script>

</html>