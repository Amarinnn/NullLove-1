<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description"
  content="An impressive and flawless site template that includes various UI elements and countless features, attractive ready-made blocks and rich pages, basically everything you need to create a unique and professional website.">
<meta name="keywords"
  content="bootstrap 5, business, corporate, creative, gulp, marketing, minimal, modern, multipurpose, one page, responsive, saas, sass, seo, startup, html5 template, site template">
<meta name="author" content="elemis">
<title>write</title>
<link rel="shortcut icon" href="./assets/img/favicon.png">
<link rel="stylesheet" href="./assets/css/plugins.css">
<link rel="stylesheet" href="./assets/css/style.css">
<link rel="preload" href="./assets/css/fonts/noto2.css" as="style" onload="this.rel='stylesheet'">
<!--사용자css-->
<link rel="stylesheet" href="./assets/css/jy.css">
</head>

<body>
  <div class="content-wrapper">
    <th:block th:replace="jy/header" ::header></th:block>
    <!-- /header -->
    <section class="wrapper image-wrapper bg-image bg-overlay bg-overlay-light-600 text-white"
      data-image-src="./assets/img/photos/bg18.png">
      <div class="container pt-10 pb-10 text-center">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h1 class="display-1 mb-3">My Page</h1>
            <!-- /nav -->
          </div>
          <!-- /column -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container -->
    </section>
    <!-- /section -->
    <section class="wrapper bg-light">
      <div class="container py-10 py-md-12">
        <div class="row gx-lg-8 gx-xl-12">
          <div class="col-lg-8 order-lg-2">
            <div class="card">
              <div class="card-body text-center">
                <div class="row row-cards ">
                  <h2 class="text-gradient gradient-7 fs-20 text-uppercase text-line text-start mb-4 ms-4">메일링
                    Service</h2>
                  <div class="card">
                    <div class="ps-2 pt-3 pb-0 card-body">
                      <div class="row gy-10 gx-lg-8 gx-xl-12">
                        <div class="col">
                          <form class="contact-form needs-validation" method="post" action="#">
                            <div class="messages"></div>
                            <div class="row gx-4">
                              <div class="col-md-3">
                                <div class="form-floating mb-4">
                                  <input id="search-form-text" type="text" name="name" class="form-control"
                                    placeholder="Jane">
                                  <label for="search-form">키워드</label>
                                  <!--  <input id="search-form-text" name="keyword" type="text" class="form-control" placeholder="Search">
                              <label for="search-form">Search</label> -->
                                  <div class="valid-feedback">Looks good!</div>
                                  <div class="invalid-feedback">Please enter your first name.</div>
                                </div>
                              </div>
                              <!-- /column -->
                              <div class="col-md-3">
                                <div class="form-select-wrapper mb-4">
                                  <select class="form-select" id="org" name="org" onchange="orgChange(this)">
                                    <option>기관을 선택해주세요</option>
                                    <option value="기획재정부">기획재정부</option>
                                    <option value="인사혁신처">인사혁신처</option>
                                    <option value="금융위원회">금융위원회</option>
                                  </select>
                                    
                               <!--    <div class="valid-feedback">Looks good!</div>
                                  <div class="invalid-feedback">Please select a department.</div> -->
                                </div>
                              </div>
                              <!-- /column -->
                              <div class="col-md-3">
                                <div class="form-select-wrapper mb-4">
                                  <select class="form-select" id="underOrg" name="underOrg">
                                    <option>선택해주세요</option>
                                
                                  </select>
                                  <div class="valid-feedback">Looks good!</div>
                                  <div class="invalid-feedback">Please select a department.</div>
                                </div>
                              </div>
                              <!-- /column -->
                              <div class="col-md-3">
                                <input class="btn btn-primary rounded-pill btn-send mb-3" readonly style="width: 130px; height: 50px; font-size: 15px;" value="구독하기"
                                  id="getMailling">
                              </div>
                              <!-- /column -->
                            </div>
                            <!-- /.row -->
                          </form>
                          <!-- /form -->
                        </div>
                        <!--/column -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- /nav -->
          </div>
          <!-- /column -->
          <aside class="col-lg-3 sidebar ">
            <div class="card" style="width: 15rem;">
              <ul class="list-group list-group-flush mypage-nav">
                <li class="list-group-item">
                  <a href="/myPage.do" class="">회원정보 수정</a>
                </li>
                <li class="list-group-item">
                  <a href="/mypageList">내가 쓴 글</a>
                </li>
                <li class="list-group-item">
                  <a href="/mypagecmtList">내가 쓴 댓글</a>
                </li>
                <li class="list-group-item"><a href="/mail">즐겨 찾기</a></li>
              </ul>
            </div>
          </aside>
          <!-- /column .sidebar -->
        </div>
        <!-- /.row -->
      </div>
      <!-- /.container -->
    </section>
  </div>
  <!-- /.content-wrapper -->
  <th:block th:replace="jy/footer" ::footer></th:block>
  <div class="progress-wrap">
    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
      <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
    </svg>
  </div>
  <script src="./assets/js/plugins.js"></script>
  <script src="./assets/js/theme.js"></script>
  <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
</body>
<script>
	$(function() {
		var plugins = [ "advlist", "autolink", "lists", "link", "image",
				"charmap", "print", "preview", "anchor", "searchreplace",
				"visualblocks", "code", "fullscreen", "insertdatetime",
				"media", "table", "paste", "code", "help", "wordcount", "save" ];
		var edit_toolbar = 'formatselect fontselect fontsizeselect |'
				+ ' forecolor backcolor |'
				+ ' bold italic underline strikethrough |'
				+ ' alignjustify alignleft aligncenter alignright |'
				+ ' bullist numlist |' + ' table tabledelete |' + ' link image';

		tinymce
				.init({
					language : "ko_KR", //한글판으로 변경
					selector : '#editor',
					height : 600,
					menubar : false,
					plugins : plugins,
					toolbar : edit_toolbar,
					content_style : 'body { font-family:Open Sans, Noto Sans KR, sans-serif; font-size:14px }',

				});

	});
</script>

<script th:inline="javascript">
	$('#getMailling').click(
			function() {
				/*<![CDATA[*/
		        let user = /*[[ ${session.mvo.email} ]]*/;
		        /*]]*/
				console.log(user);
				var keyword = $('#search-form-text').val();
				console.log(keyword);
				var orgs = $("#org option:selected").val();
				console.log(orgs);
				$.ajax({
					url : "http://localhost:8090/favorite?user=" + user
							+ "&keyword=" + keyword + "&orgs=" + orgs,
					type : "GET",
					dataType : "json",
					success : function(result) {
						console.log("success");
						
					},
					error : function(result) {
						alert("메일전송에 성공했습니다.");
						console.log(data);
					}
				});
			})
		
</script>
<script type="text/javascript">
	function orgChange(e){
		var plan = ["한국수출입은행","한국조폐공사","한국재정정보원","한국투자공사","복권위원회사무처","국세청","관세청","조달청","통계청"]
	    var hr = ["국가공무원인재개발원","소청심사위원회","공무원연금공단"]
	    var bank = ["신용보증기금","중소기업은행","한국산업은행","한국예탁결제원","한국자산관리공사","한국주택금융공사","금융정보분석원"]
		var target = document.getElementById("underOrg");
		
		if(e.value == "기획재정부") var d = plan;
		else if(e.value =="인사혁신처") var d = hr;
		else if(e.value=="금융위원회")var d = bank;
		
		target.options.length = 0;
		
		for(x in d){
			var opt = document.createElement("option");
			opt.value=d[x];
			opt.innerHTML = d[x];
			target.appendChild(opt);
		}
	
	
	
	
	}
</script>
</html>