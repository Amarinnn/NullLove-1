<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.loven.mapper.BoardMapper">


	<!-- 회원가입 -->
	<insert id="joinInsert" parameterType="User">
		insert into
		User(id,pw,name,nick,email,login_type,company_name)
		values(#{id},#{pw},#{name},#{nick},#{email},#{login_type},#{company_name})
	</insert>
	<!-- 로그인 -->
	<select id="loginCheck" resultType="User">
		select * from User where
		id=#{id} and pw=#{pw} and login_type=#{login_type}
	</select>
	
	<select id="loginAdmin" resultType="User">
		select * from User where
		id=#{id} and pw=#{pw} and login_type = 'a'
	</select>
	<!-- 아이디 중복 체크 -->
	<select id="idCheck" parameterType="String" resultType="int">
		SELECT
		COUNT(id) FROM User WHERE id= #{id}
	</select>
	<!-- 기업 회원가입 -->
	<insert id="cInsert" parameterType="Company">

		insert into
		company(no,opendate,owner,type,id,name)
		values(#{no},#{opendate},#{owner},#{type},#{id},#{name})
	</insert>
	<!-- 기업 로그인 -->
	<select id="companyCheck" resultType="Company"
		parameterType="User">
		select * from company c,User u where c.id=u.id and c.id=#{id} and u.login_type=#{login_type}
	</select>
	<!-- 블라인드 게시판 리스트 -->
	<select id="blindList" resultType="BlindVO">
		select * from blind order by seq desc
	</select>
	<!-- 블라인드 게시판 인서트 -->
	<insert id="blindInsert" parameterType="BlindVO">
		insert into
		blind(seq,title,content,id)
		values(#{seq},#{title},#{content},#{id})
	</insert>
	<!-- 조회수 증가 -->
	<update id="plusCnt" parameterType="int">
		update blind set
		cnt = cnt+1
		where
		seq = #{seq}
	</update>
	<!-- 블라인드 게시판 상세보기 -->
	<select id="blindView" resultType="BlindVO" parameterType="int">
		select * from blind where seq=#{seq}
	</select>
	<!-- 블라인드 게시판 업데이트 -->
	<update id="blindUpdate" parameterType="BlindVO">
		update blind set title=#{title}, content=#{content} where seq=#{seq}

	</update>
	<!-- 블라인드 게시판 딜리트 -->
	<delete id="blindDelete">
		delete from blind where seq=#{seq}
	</delete>
</mapper>
